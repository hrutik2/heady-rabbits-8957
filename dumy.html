
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  #graph{
    width: 40%;
    margin: auto;
  }
  
</style>
<body>
  <input type="number"placeholder="amount" id="input">
  <select name="from currency" id="fromCurrency">
    <option value="NGN">Nigerian Naira</option>
    <option value="USD">United States Dollar </option>
    <option value="INR">Indian Rupee</option>
    <option value="AED">United Arab Emirates Dirham</option>
    <option value="JPY">Japanese Yen</option>
    <option value="ALL">Albanian Lek</option>
    <option value="AMD">Armenian Dram</option>
    <option value="EUR">European Union countries </option>
    <option value="CHF">Swiss Franc</option>
    <option value="RUB">Russian Ruble</option>
    
  
  </select>
  to
  <select name=" to currency" id="toCurrency">
    <option value="NGN">Nigerian Naira</option>
    <option value="USD">United States Dollar </option>
    <option value="INR">Indian Rupee</option>
    <option value="AED">United Arab Emirates Dirham</option>
    <option value="JPY">Japanese Yen</option>
    <option value="ALL">Albanian Lek</option>
    <option value="AMD">Armenian Dram</option>
    <option value="EUR">European Union countries </option>
    <option value="CHF">Swiss Franc</option>
    <option value="RUB">Russian Ruble</option>
  
  </select>
  <button id ="button">convert</button>

  <div id="container">

  </div>

  <div id="graph">
    
   </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
<script>

let amount=document.getElementById("input")
let fromCurrency=document.getElementById("fromCurrency") 
let toCurrency=document.getElementById("toCurrency")


let data1=[]
let currencyLabels=["NGN","USD","INR","AED","JPY","ALL","AMD","EUR","CHF","RUB"]

function fetchdata(amount,fromCurrency,toCurrency){
  fetch(`https://v6.exchangerate-api.com/v6/4e91992fdfbf260b8a901831/latest/${fromCurrency}`)
    .then(function(response) {
      return response.json();
    })
    .then(function(data) {
      //console.log(data.conversion_rates)
      data1=data.conversion_rates
      console.log(data1)
      currencyExchange(amount,toCurrency,fromCurrency)
      graph1(currencyLabels,fromCurrency)
    })
    .catch(error=>console.log("error")) 
    
   
}
let container=document.getElementById("container")
 function currencyExchange(amount,toCurrency ,fromCurrency){
 
  container.innerHTML=""
  let a=amount* data1[toCurrency]
 
  container.innerText=`${amount} ${fromCurrency}=${a} ${toCurrency}`

  
}
 let button=document.getElementById("button")
 button.addEventListener("click",()=>{
  let a=amount.value
 let b=fromCurrency.value
  let c=toCurrency.value
   fetchdata(a,b,c)
  
})



function graph1(currencyLabels,baseCurrency,){

let exchangeRates=[]
 for(let i=0;i<currencyLabels.length;i++){
   exchangeRates.push(data1[currencyLabels[i]])
   }

   
   graph(baseCurrency,currencyLabels,exchangeRates)
 
//ans(data,toCurrency,amount)



}
let graphsection=document.getElementById("graph")


function graph(baseCurrency,currencyLabels,exchangeRates){
 graphsection.innerHTML=""
  console.log(exchangeRates)
let canvas=document.createElement("canvas")
ctx=canvas.getContext("2d")

let exchangeChart = new Chart(ctx, {
  type: 'bar',
  data: {
    labels: currencyLabels,
    datasets: [{
      label: `Exchange Rates (Base: ${baseCurrency})`,
      data: exchangeRates,
      backgroundColor: 'rgba(54, 162, 235, 0.6)',
      borderColor: 'rgba(54, 162, 235, 1)',
      borderWidth: 1
    }]
  },
  options: {
    responsive: true,
    scales: {
      y: {
        beginAtInfinity: true
      }
    }
  }
});
graphsection.append(canvas)
}

</script>
</html>
  